# Вызывается из директории с приложением
# sudo docker build -t test_app .
# Флаг -t - имя образа который мы собираем
# . - говорит Docker использовать Dockerfile из текущей директории


# FROM определяет базовый образ операционной системы
# python - имя образа, слова после : это тег, если тег не указать по default ставит latest
FROM python:3.12.3
# Создать каталог /app. RUN определяет какую команду выполнить внутри контейнера
RUN mkdir /app
# Копируем файл с зависимостями 1-й аргумент файлова система на host 2-й аргумент файловая система образа
COPY requirements.txt /app/
# Установить зависимости в интерпритатор
RUN python -m pip install -r /app/requirements.txt
# Копируем файл с приложением
COPY app.py /app/
# Укажем в каком каталоге находится на момент запуска контейнера
WORKDIR /app
# Команда которая выполнится в момент запуска контейнера
ENTRYPOINT ["python", "app.py"]

# Запуск контейнера
#  docker run -p 5050:5000 -e "SERVICE_NAME=my_app"  test_app
# Флаг -p - порт host/порт docker   -e (env) - передаваемые переменные в окружение
